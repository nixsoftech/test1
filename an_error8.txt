TASK [Get current OS release] ********************************************************************************************
ok: [10.13.0.81] => {"changed": false, "cmd": ["lsb_release", "-sr"], "delta": "0:00:00.022401", "end": "2025-04-24 18:31:06.820424", "rc": 0, "start": "2025-04-24 18:31:06.798023", "stderr": "", "stderr_lines": [], "stdout": "20.04", "stdout_lines": ["20.04"]}

TASK [List installed i386 packages] **************************************************************************************
ok: [10.13.0.81] => {"changed": false, "cmd": ["dpkg", "-l", "|", "grep", ":i386", "|", "awk", "{print $2}"], "delta": "0:00:00.016375", "end": "2025-04-24 18:31:07.131775", "failed_when_result": false, "msg": "non-zero return code", "rc": 1, "start": "2025-04-24 18:31:07.115400", "stderr": "dpkg-query: no packages found matching |\ndpkg-query: no packages found matching :i386\ndpkg-query: no packages found matching |\ndpkg-query: no packages found matching {print $2}", "stderr_lines": ["dpkg-query: no packages found matching |", "dpkg-query: no packages found matching :i386", "dpkg-query: no packages found matching |", "dpkg-query: no packages found matching {print $2}"], "stdout": "Desired=Unknown/Install/Remove/Purge/Hold\n| Status=Not/Inst/Conf-files/Unpacked/halF-conf/Half-inst/trig-aWait/Trig-pend\n|/ Err?=(none)/Reinst-required (Status,Err: uppercase=bad)\n||/ Name           Version      Architecture Description\n+++-==============-============-============-=================================\nun  awk            <none>       <none>       (no description available)\nii  grep           3.1-2build1  amd64        GNU grep, egrep and fgrep", "stdout_lines": ["Desired=Unknown/Install/Remove/Purge/Hold", "| Status=Not/Inst/Conf-files/Unpacked/halF-conf/Half-inst/trig-aWait/Trig-pend", "|/ Err?=(none)/Reinst-required (Status,Err: uppercase=bad)", "||/ Name           Version      Architecture Description", "+++-==============-============-============-=================================", "un  awk            <none>       <none>       (no description available)", "ii  grep           3.1-2build1  amd64        GNU grep, egrep and fgrep"]}

TASK [Remove i386 packages] **********************************************************************************************
[WARNING]: Updating cache and auto-installing missing dependency: python-apt
fatal: [10.13.0.81]: FAILED! => {"changed": false, "cmd": "apt-get install --no-install-recommends python-apt -y -q", "msg": "E: Unmet dependencies. Try 'apt --fix-broken install' with no packages (or specify a solution).", "rc": 100, "stderr": "E: Unmet dependencies. Try 'apt --fix-broken install' with no packages (or specify a solution).\n", "stderr_lines": ["E: Unmet dependencies. Try 'apt --fix-broken install' with no packages (or specify a solution)."], "stdout": "Reading package lists...\nBuilding dependency tree...\nReading state information...\nYou might want to run 'apt --fix-broken install' to correct these.\nThe following packages have unmet dependencies:\n debconf-utils : Depends: debconf (= 1.5.66ubuntu1) but 1.5.73 is to be installed\n libapt-pkg-perl : Depends: perlapi-5.26.1\n                   Depends: libapt-pkg5.0 (>= 1.1~exp9) but it is not going to be installed\n libasyncns0:i386 : Depends: libc6:i386 (>= 2.15) but it is not installable\n libcapi20-3:i386 : Depends: libc6:i386 (>= 2.15) but it is not installable\n libcdparanoia0:i386 : Depends: libc6:i386 (>= 2.15) but it is not installable\n libffi6:i386 : Depends: libc6:i386 (>= 2.7) but it is not installable\n libgpm2:i386 : Depends: libc6:i386 (>= 2.15) but it is not installable\n libgsm1:i386 : Depends: libc6:i386 (>= 2.4) but it is not installable\n libjpeg-turbo8:i386 : Depends: libc6:i386 (>= 2.7) but it is not installable\n libnettle6:i386 : Depends: libc6:i386 (>= 2.4) but it is not installable\n libxrender1:i386 : Depends: libc6:i386 (>= 2.4) but it is not installable\n                    Depends: libx11-6:i386 (>= 2:1.6.0) but it is not installable\n libxshmfence1:i386 : Depends: libc6:i386 (>= 2.27) but it is not installable\n ocl-icd-libopencl1:i386 : Depends: libc6:i386 (>= 2.4) but it is not installable\n python-apt : Depends: python2 (< 2.8) but it is not going to be installed\n              Depends: python2 (>= 2.7~) but it is not going to be installed\n              Depends: python2:any (< 2.8)\n              Depends: python2:any (>= 2.7~)\n python3-msgpack : Depends: python3 (< 3.7) but 3.8.2-0ubuntu2 is to be installed\n python3-psutil : Depends: python3 (< 3.7) but 3.8.2-0ubuntu2 is to be installed\n python3-tornado : Depends: python3 (< 3.7) but 3.8.2-0ubuntu2 is to be installed\n python3-zmq : Depends: python3 (< 3.7) but 3.8.2-0ubuntu2 is to be installed\n", "stdout_lines": ["Reading package lists...", "Building dependency tree...", "Reading state information...", "You might want to run 'apt --fix-broken install' to correct these.", "The following packages have unmet dependencies:", " debconf-utils : Depends: debconf (= 1.5.66ubuntu1) but 1.5.73 is to be installed", " libapt-pkg-perl : Depends: perlapi-5.26.1", "                   Depends: libapt-pkg5.0 (>= 1.1~exp9) but it is not going to be installed", " libasyncns0:i386 : Depends: libc6:i386 (>= 2.15) but it is not installable", " libcapi20-3:i386 : Depends: libc6:i386 (>= 2.15) but it is not installable", " libcdparanoia0:i386 : Depends: libc6:i386 (>= 2.15) but it is not installable", " libffi6:i386 : Depends: libc6:i386 (>= 2.7) but it is not installable", " libgpm2:i386 : Depends: libc6:i386 (>= 2.15) but it is not installable", " libgsm1:i386 : Depends: libc6:i386 (>= 2.4) but it is not installable", " libjpeg-turbo8:i386 : Depends: libc6:i386 (>= 2.7) but it is not installable", " libnettle6:i386 : Depends: libc6:i386 (>= 2.4) but it is not installable", " libxrender1:i386 : Depends: libc6:i386 (>= 2.4) but it is not installable", "                    Depends: libx11-6:i386 (>= 2:1.6.0) but it is not installable", " libxshmfence1:i386 : Depends: libc6:i386 (>= 2.27) but it is not installable", " ocl-icd-libopencl1:i386 : Depends: libc6:i386 (>= 2.4) but it is not installable", " python-apt : Depends: python2 (< 2.8) but it is not going to be installed", "              Depends: python2 (>= 2.7~) but it is not going to be installed", "              Depends: python2:any (< 2.8)", "              Depends: python2:any (>= 2.7~)", " python3-msgpack : Depends: python3 (< 3.7) but 3.8.2-0ubuntu2 is to be installed", " python3-psutil : Depends: python3 (< 3.7) but 3.8.2-0ubuntu2 is to be installed", " python3-tornado : Depends: python3 (< 3.7) but 3.8.2-0ubuntu2 is to be installed", " python3-zmq : Depends: python3 (< 3.7) but 3.8.2-0ubuntu2 is to be installed"]}
...ignoring

TASK [Disable i386 architecture] *****************************************************************************************
fatal: [10.13.0.81]: FAILED! => {"changed": true, "cmd": ["dpkg", "--remove-architecture", "i386"], "delta": "0:00:00.015521", "end": "2025-04-24 18:31:24.381221", "msg": "non-zero return code", "rc": 2, "start": "2025-04-24 18:31:24.365700", "stderr": "dpkg: error: cannot remove architecture 'i386' currently in use by the database", "stderr_lines": ["dpkg: error: cannot remove architecture 'i386' currently in use by the database"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [Ensure focal sources are configured] *******************************************************************************
ok: [10.13.0.81] => {"changed": false, "checksum": "3473a629a12004ecb90d953d6c32ef83e7c5ecce", "dest": "/etc/apt/sources.list", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/etc/apt/sources.list", "size": 218, "state": "file", "uid": 0}

TASK [Remove external sources] *******************************************************************************************
ok: [10.13.0.81] => (item=microsoft.list) => {"ansible_loop_var": "item", "changed": false, "item": "microsoft.list", "path": "/etc/apt/sources.list.d/microsoft.list", "state": "absent"}
ok: [10.13.0.81] => (item=bionic.list) => {"ansible_loop_var": "item", "changed": false, "item": "bionic.list", "path": "/etc/apt/sources.list.d/bionic.list", "state": "absent"}

TASK [Disable AppStream to avoid appstreamcli error] *********************************************************************
ok: [10.13.0.81] => {"changed": false, "path": "/etc/apt/apt.conf.d/50appstream", "state": "absent"}

TASK [Update package cache] **********************************************************************************************
fatal: [10.13.0.81]: FAILED! => {"changed": false, "cmd": "apt-get install --no-install-recommends python-apt -y -q", "msg": "E: Unmet dependencies. Try 'apt --fix-broken install' with no packages (or specify a solution).", "rc": 100, "stderr": "E: Unmet dependencies. Try 'apt --fix-broken install' with no packages (or specify a solution).\n", "stderr_lines": ["E: Unmet dependencies. Try 'apt --fix-broken install' with no packages (or specify a solution)."], "stdout": "Reading package lists...\nBuilding dependency tree...\nReading state information...\nYou might want to run 'apt --fix-broken install' to correct these.\nThe following packages have unmet dependencies:\n debconf-utils : Depends: debconf (= 1.5.66ubuntu1) but 1.5.73 is to be installed\n libapt-pkg-perl : Depends: perlapi-5.26.1\n                   Depends: libapt-pkg5.0 (>= 1.1~exp9) but it is not going to be installed\n libasyncns0:i386 : Depends: libc6:i386 (>= 2.15) but it is not installable\n libcapi20-3:i386 : Depends: libc6:i386 (>= 2.15) but it is not installable\n libcdparanoia0:i386 : Depends: libc6:i386 (>= 2.15) but it is not installable\n libffi6:i386 : Depends: libc6:i386 (>= 2.7) but it is not installable\n libgpm2:i386 : Depends: libc6:i386 (>= 2.15) but it is not installable\n libgsm1:i386 : Depends: libc6:i386 (>= 2.4) but it is not installable\n libjpeg-turbo8:i386 : Depends: libc6:i386 (>= 2.7) but it is not installable\n libnettle6:i386 : Depends: libc6:i386 (>= 2.4) but it is not installable\n libxrender1:i386 : Depends: libc6:i386 (>= 2.4) but it is not installable\n                    Depends: libx11-6:i386 (>= 2:1.6.0) but it is not installable\n libxshmfence1:i386 : Depends: libc6:i386 (>= 2.27) but it is not installable\n ocl-icd-libopencl1:i386 : Depends: libc6:i386 (>= 2.4) but it is not installable\n python-apt : Depends: python2 (< 2.8) but it is not going to be installed\n              Depends: python2 (>= 2.7~) but it is not going to be installed\n              Depends: python2:any (< 2.8)\n              Depends: python2:any (>= 2.7~)\n python3-msgpack : Depends: python3 (< 3.7) but 3.8.2-0ubuntu2 is to be installed\n python3-psutil : Depends: python3 (< 3.7) but 3.8.2-0ubuntu2 is to be installed\n python3-tornado : Depends: python3 (< 3.7) but 3.8.2-0ubuntu2 is to be installed\n python3-zmq : Depends: python3 (< 3.7) but 3.8.2-0ubuntu2 is to be installed\n", "stdout_lines": ["Reading package lists...", "Building dependency tree...", "Reading state information...", "You might want to run 'apt --fix-broken install' to correct these.", "The following packages have unmet dependencies:", " debconf-utils : Depends: debconf (= 1.5.66ubuntu1) but 1.5.73 is to be installed", " libapt-pkg-perl : Depends: perlapi-5.26.1", "                   Depends: libapt-pkg5.0 (>= 1.1~exp9) but it is not going to be installed", " libasyncns0:i386 : Depends: libc6:i386 (>= 2.15) but it is not installable", " libcapi20-3:i386 : Depends: libc6:i386 (>= 2.15) but it is not installable", " libcdparanoia0:i386 : Depends: libc6:i386 (>= 2.15) but it is not installable", " libffi6:i386 : Depends: libc6:i386 (>= 2.7) but it is not installable", " libgpm2:i386 : Depends: libc6:i386 (>= 2.15) but it is not installable", " libgsm1:i386 : Depends: libc6:i386 (>= 2.4) but it is not installable", " libjpeg-turbo8:i386 : Depends: libc6:i386 (>= 2.7) but it is not installable", " libnettle6:i386 : Depends: libc6:i386 (>= 2.4) but it is not installable", " libxrender1:i386 : Depends: libc6:i386 (>= 2.4) but it is not installable", "                    Depends: libx11-6:i386 (>= 2:1.6.0) but it is not installable", " libxshmfence1:i386 : Depends: libc6:i386 (>= 2.27) but it is not installable", " ocl-icd-libopencl1:i386 : Depends: libc6:i386 (>= 2.4) but it is not installable", " python-apt : Depends: python2 (< 2.8) but it is not going to be installed", "              Depends: python2 (>= 2.7~) but it is not going to be installed", "              Depends: python2:any (< 2.8)", "              Depends: python2:any (>= 2.7~)", " python3-msgpack : Depends: python3 (< 3.7) but 3.8.2-0ubuntu2 is to be installed", " python3-psutil : Depends: python3 (< 3.7) but 3.8.2-0ubuntu2 is to be installed", " python3-tornado : Depends: python3 (< 3.7) but 3.8.2-0ubuntu2 is to be installed", " python3-zmq : Depends: python3 (< 3.7) but 3.8.2-0ubuntu2 is to be installed"]}

PLAY RECAP ***************************************************************************************************************
10.13.0.81                 : ok=10   changed=1    unreachable=0    failed=1    skipped=3    rescued=0    ignored=2
